<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/header :: head}"></th:block>
    <title>Create Profile - Matrimony</title>
</head>
<body th:attr="data-logged-in=${session.user != null}">
<!-- Header -->
<th:block th:replace="~{fragments/header :: navbar}"></th:block>

<div class="container">
    <div class="profile-create-container">
        <div class="profile-create-header">
            <h1>Create Your Profile</h1>
            <p>Fill in your details to create an attractive profile</p>
        </div>

        <!-- Alert Messages -->
        <div class="alert alert-error" th:if="${error}" th:text="${error}"></div>
        <div class="alert alert-success" th:if="${success}" th:text="${success}"></div>

        <!-- Profile Form -->
        <form class="profile-form" th:action="@{/profile/create}" method="post"
              id="profileForm" enctype="multipart/form-data">

            <!-- Personal Information -->
            <div class="form-section">
                <h2 class="form-section-title">Personal Information</h2>

                <div class="image-upload-container">
                    <div class="image-preview">
                        <i class="fas fa-user image-preview-placeholder"></i>
                    </div>
                    <div class="file-input-wrapper">
                        <label for="profileImage" class="file-input-label">
                            <i class="fas fa-camera"></i> Upload Photo
                        </label>
                        <input type="file" id="profileImage" name="profileImage"
                               accept="image/*">
                    </div>
                    <p style="font-size: 12px; color: #666; margin-top: 10px;">
                        Max size: 5MB | Formats: JPG, PNG
                    </p>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name *</label>
                        <input type="text" id="firstName" name="firstName" class="form-control"
                               required th:value="${profile?.firstName}">
                    </div>

                    <div class="form-group">
                        <label for="lastName">Last Name *</label>
                        <input type="text" id="lastName" name="lastName" class="form-control"
                               required th:value="${profile?.lastName}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="gender">Gender *</label>
                        <select id="gender" name="gender" class="form-control" required>
                            <option value="">Select Gender</option>
                            <option value="male" th:selected="${profile?.gender == 'male'}">Male</option>
                            <option value="female" th:selected="${profile?.gender == 'female'}">Female</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth *</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-control"
                               required th:value="${profile?.dateOfBirth}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="maritalStatus">Marital Status *</label>
                        <select id="maritalStatus" name="maritalStatus" class="form-control" required>
                            <option value="">Select Status</option>
                            <option value="never_married" th:selected="${profile?.maritalStatus == 'never_married'}">Never Married</option>
                            <option value="divorced" th:selected="${profile?.maritalStatus == 'divorced'}">Divorced</option>
                            <option value="widowed" th:selected="${profile?.maritalStatus == 'widowed'}">Widowed</option>
                            <option value="awaiting_divorce" th:selected="${profile?.maritalStatus == 'awaiting_divorce'}">Awaiting Divorce</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="height">Height (in cm) *</label>
                        <input type="number" id="height" name="height" class="form-control"
                               min="100" max="250" required th:value="${profile?.height}">
                    </div>
                </div>

                <div class="form-group form-group-full">
                    <label>Mother Tongue *</label>
                    <select id="motherTongue" name="motherTongue" class="form-control" required>
                        <option value="">Select Mother Tongue</option>
                        <option value="hindi" th:selected="${profile?.motherTongue == 'hindi'}">Hindi</option>
                        <option value="english" th:selected="${profile?.motherTongue == 'english'}">English</option>
                        <option value="tamil" th:selected="${profile?.motherTongue == 'tamil'}">Tamil</option>
                        <option value="telugu" th:selected="${profile?.motherTongue == 'telugu'}">Telugu</option>
                        <option value="marathi" th:selected="${profile?.motherTongue == 'marathi'}">Marathi</option>
                        <option value="gujarati" th:selected="${profile?.motherTongue == 'gujarati'}">Gujarati</option>
                        <option value="bengali" th:selected="${profile?.motherTongue == 'bengali'}">Bengali</option>
                        <option value="kannada" th:selected="${profile?.motherTongue == 'kannada'}">Kannada</option>
                        <option value="malayalam" th:selected="${profile?.motherTongue == 'malayalam'}">Malayalam</option>
                        <option value="punjabi" th:selected="${profile?.motherTongue == 'punjabi'}">Punjabi</option>
                    </select>
                </div>
            </div>

            <!-- Religious Information -->
            <div class="form-section">
                <h2 class="form-section-title">Religious Information</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="religion">Religion *</label>
                        <select id="religion" name="religion" class="form-control" required>
                            <option value="">Select Religion</option>
                            <option value="hindu" th:selected="${profile?.religion == 'hindu'}">Hindu</option>
                            <option value="muslim" th:selected="${profile?.religion == 'muslim'}">Muslim</option>
                            <option value="christian" th:selected="${profile?.religion == 'christian'}">Christian</option>
                            <option value="sikh" th:selected="${profile?.religion == 'sikh'}">Sikh</option>
                            <option value="buddhist" th:selected="${profile?.religion == 'buddhist'}">Buddhist</option>
                            <option value="jain" th:selected="${profile?.religion == 'jain'}">Jain</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="caste">Caste</label>
                        <input type="text" id="caste" name="caste" class="form-control"
                               th:value="${profile?.caste}">
                    </div>
                </div>
            </div>

            <!-- Location Details -->
            <div class="form-section">
                <h2 class="form-section-title">Location Details</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="country">Country *</label>
                        <select id="country" name="country" class="form-control" required>
                            <option value="">Select Country</option>
                            <option value="india" th:selected="${profile?.country == 'india'}">India</option>
                            <option value="usa" th:selected="${profile?.country == 'usa'}">USA</option>
                            <option value="uk" th:selected="${profile?.country == 'uk'}">UK</option>
                            <option value="canada" th:selected="${profile?.country == 'canada'}">Canada</option>
                            <option value="australia" th:selected="${profile?.country == 'australia'}">Australia</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="state">State *</label>
                        <input type="text" id="state" name="state" class="form-control"
                               required th:value="${profile?.state}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="city">City *</label>
                        <input type="text" id="city" name="city" class="form-control"
                               required th:value="${profile?.city}">
                    </div>

                    <div class="form-group">
                        <label for="pincode">Pincode</label>
                        <input type="text" id="pincode" name="pincode" class="form-control"
                               th:value="${profile?.pincode}">
                    </div>
                </div>
            </div>

            <!-- Professional Information -->
            <div class="form-section">
                <h2 class="form-section-title">Professional Information</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="education">Highest Education *</label>
                        <select id="education" name="education" class="form-control" required>
                            <option value="">Select Education</option>
                            <option value="high_school" th:selected="${profile?.education == 'high_school'}">High School</option>
                            <option value="diploma" th:selected="${profile?.education == 'diploma'}">Diploma</option>
                            <option value="bachelors" th:selected="${profile?.education == 'bachelors'}">Bachelor's Degree</option>
                            <option value="masters" th:selected="${profile?.education == 'masters'}">Master's Degree</option>
                            <option value="doctorate" th:selected="${profile?.education == 'doctorate'}">Doctorate</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="profession">Profession *</label>
                        <input type="text" id="profession" name="profession" class="form-control"
                               required th:value="${profile?.profession}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="annualIncome">Annual Income *</label>
                        <select id="annualIncome" name="annualIncome" class="form-control" required>
                            <option value="">Select Income Range</option>
                            <option value="0-3" th:selected="${profile?.annualIncome == '0-3'}">₹0 - 3 Lakhs</option>
                            <option value="3-5" th:selected="${profile?.annualIncome == '3-5'}">₹3 - 5 Lakhs</option>
                            <option value="5-7" th:selected="${profile?.annualIncome == '5-7'}">₹5 - 7 Lakhs</option>
                            <option value="7-10" th:selected="${profile?.annualIncome == '7-10'}">₹7 - 10 Lakhs</option>
                            <option value="10-15" th:selected="${profile?.annualIncome == '10-15'}">₹10 - 15 Lakhs</option>
                            <option value="15+" th:selected="${profile?.annualIncome == '15+'}">₹15+ Lakhs</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="employedIn">Employed In</label>
                        <select id="employedIn" name="employedIn" class="form-control">
                            <option value="">Select</option>
                            <option value="private" th:selected="${profile?.employedIn == 'private'}">Private Sector</option>
                            <option value="government" th:selected="${profile?.employedIn == 'government'}">Government</option>
                            <option value="business" th:selected="${profile?.employedIn == 'business'}">Business</option>
                            <option value="self_employed" th:selected="${profile?.employedIn == 'self_employed'}">Self Employed</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- About Me -->
            <div class="form-section">
                <h2 class="form-section-title">About Me</h2>

                <div class="form-group form-group-full">
                    <label for="aboutMe">Write About Yourself</label>
                    <textarea id="aboutMe" name="aboutMe" class="form-control"
                              rows="5" th:text="${profile?.aboutMe}"></textarea>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="form-section">
                <h2 class="form-section-title">Contact Information</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" class="form-control"
                               required th:value="${profile?.email}">
                    </div>

                    <div class="form-group">
                        <label for="phone">Mobile Number *</label>
                        <input type="tel" id="phone" name="phone" class="form-control"
                               required th:value="${profile?.phone}">
                    </div>
                </div>

                <div class="form-group form-group-full">
                    <label class="checkbox-option">
                        <input type="checkbox" name="verifyMobile" value="true">
                        <span>Verify my mobile number (Get 100% Verified badge)</span>
                    </label>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                    Cancel
                </button>
                <button type="submit" class="btn btn-primary">
                    Create Profile
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Footer -->
<th:block th:replace="~{fragments/footer :: footer}"></th:block>
</body>
</html>